# 章节分组功能说明

## 功能概述

章节列表现在支持智能分组显示,自动识别章节类型并按卷或按章分类展示。

## 章节类型识别

### 按卷分类
系统会自动识别以下格式的章节标题为"卷":
- `第一卷`, `第二卷`, `第三卷` (中文数字)
- `卷1`, `卷2`, `卷3` (数字)
- `Vol.1`, `Vol.2`, `Volume 1` (英文)

### 按章分类
其他章节会被归类为"章节",包括:
- `第1话`, `第2话`, `第3话`
- `第1章`, `第2章`, `第3章`
- `话1`, `话2`, `章1`, `章2`
- `Ch.1`, `Chapter 1`, `EP1`

## 界面展示

### 分组头部
- 显示分组名称 (如"卷 1", "卷 2", "章节")
- 显示该组章节数量
- 选择模式下显示"全选"/"取消"按钮,可快速选择整组

### 章节卡片
- Card 样式,圆角阴影效果
- 选择模式下左侧显示复选框
- 显示章节标题和更新时间
- 已读章节显示绿色标记
- 右侧显示箭头指示器

## 批量下载功能

### 进入选择模式
点击右上角"批量下载"按钮

### 选择章节
- **单选**: 点击章节卡片切换选中状态
- **按组全选**: 点击分组头部的"全选"按钮
- **全局全选**: 点击顶部的"全选"按钮

### 下载操作
- 选择完成后点击"下载"按钮
- 系统会显示已选章节数量
- 可以随时点击"取消"退出选择模式

## 排序功能

点击右上角的排序按钮可切换:
- **正序** (↓): 从第一章到最新章
- **倒序** (↑): 从最新章到第一章

## 视觉反馈

### 章节状态
- **正常**: 白色背景,灰色边框
- **当前阅读**: 蓝色背景,蓝色边框
- **已选中**: 紫色背景,紫色边框
- **已读**: 绿色标记

### 分组样式
- 浅灰色背景
- 圆角设计
- 清晰的视觉层次

## 技术实现

### 自动分组逻辑
```javascript
// 识别章节类型
const detectChapterType = (title) => {
  if (/第[一二三四五六七八九十百千\d]+卷|卷[\d]+|Vol\.[\d]+|Volume[\d]+/i.test(title)) {
    return 'volume';
  }
  if (/第[\d]+话|第[\d]+章|话[\d]+|章[\d]+|Ch\.[\d]+|Chapter[\d]+|EP[\d]+/i.test(title)) {
    return 'chapter';
  }
  return 'chapter';
};
```

### 分组处理
- 按卷号或章节标识自动分组
- 保持章节顺序
- 支持正序/倒序切换

## 后续扩展

可以进一步实现:
- 下载进度显示
- 离线缓存管理
- 已下载章节标记
- 自动下载新章节
