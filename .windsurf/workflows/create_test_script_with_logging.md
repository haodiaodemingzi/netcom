# 创建带日志功能的数据源测试脚本

## 任务目标

创建一个新的测试脚本，用于测试所有数据源的 API 是否能正常返回数据，并将详细的返回数据记录到日志文件中，便于调试和问题排查。

## 背景

现有的 `backend/test_all_sources.py` 脚本可以测试所有数据源，但只输出简单的测试结果摘要，不包含详细的 API 响应数据。当数据源出现问题时，难以快速定位具体是哪个 API 调用返回了错误数据。

## 实施计划

### 1. 创建新脚本文件
- 在 `backend` 目录下创建名为 `test_all_sources_with_log.py` 的新文件

### 2. 添加日志功能
- 引入 `logging` 和 `json` 模块
- 配置日志记录器，将详细的 API 响应数据输出到 `backend/test_all_sources.log` 文件中
- 使用 `json.dumps()` 将 API 返回的字典数据格式化为易于阅读的 JSON 字符串
- 在每次调用 API 后，将返回的完整数据记录到日志文件中

### 3. 保留核心逻辑
- 新脚本将保留 `backend/test_all_sources.py` 的核心测试流程：
  - 遍历所有启用的数据源
  - 对每个数据源依次测试以下 API：
    - 获取分类
    - 获取热门漫画
    - 搜索
    - 获取漫画详情
    - 获取章节列表
    - 获取章节图片
  - 在控制台输出最终的测试结果摘要

### 4. 日志记录格式
- 每个数据源的测试开始时，记录一条分隔线
- 每次调用 API 时，记录 API 名称和参数
- 记录 API 返回的完整数据
- 如果 API 调用失败，记录详细的错误信息

### 5. 运行方式
- 在命令行中执行 `python backend/test_all_sources_with_log.py`
- 日志文件将保存在 `backend/test_all_sources.log`

## 预期成果

- 一个能够测试所有数据源并记录详细返回数据的新测试脚本
- 一个包含所有 API 调用详细响应数据的日志文件
- 便于用户快速定位和调试数据源问题

## 后续步骤

1. 创建 `backend/test_all_sources_with_log.py` 文件
2. 实现带日志记录功能的测试代码
3. 告知用户如何运行新脚本并查看日志
